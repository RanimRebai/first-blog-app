<!DOCTYPE html>
<html lang="en">
    <%- include("partials/header.ejs")%>

<body>

    <%if (posts && posts.length !== 0) {%>
        <div class="home">
        <% posts.forEach((post,index) => {%>
          
            
            <div class="card px-2 py-2 mx-1 my-2 homeCards" style="width: 28rem;">
                <div class="card-body">
                  
                  <h3 class="card-title"><%= post.title  %></h3>
                  <h4 class="card-subtitle text-body-secondary"><%= post.object  %></h4>
                  <p class="card-text" style="display: none;" id="<%=index%>"><%= post.description  %></p>
                  <div style="text-align:center">
                    <button class="btn btn-primary bt<%=index%> btnn" onclick="myfunction(<%= index%>)" style="background-color: #7D0A0A;
                        color: #F2EFE7;
                        font-size: large;
                        border: #006A71;;">Show More..</button>
                  </div>
                  <div class="card-footer" style="background-color: transparent;">
                    <div class="icons">
                    <button class="btnLike btnIcon" id="likes<%=index%>" onclick="change(<%=index%>)"><i class="bi bi-heart" id="like<%=index%>">0</i></button>
                    <div>
                        <a href="/edit?index=<%= index %>"><button class="btnEdit btnIcon" ><i class="bi bi-pencil-square"></i></button></a>
                        <a href="/del?index=<%= index %>"><button class="btnEdit btnIcon"><i class="bi bi-trash3-fill"></i></button></a>
                    </div>
                </div>
                </div>
                </div>
              
            </div>
        
       <%});%>
    </div>
    <%}else{%>
        <h2>Nothing Exciting Yet..</h2>
        <%}%>

    <%- include("partials/footer.ejs")%>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script>
        function myfunction(myid) {
            var x = document.getElementById(myid);
            var y= document.getElementsByClassName("bt"+myid)[0];
            if (x.style.display === "none") {
                x.style.display = "block";
                y.textContent = "Show Less..";

            } else {
                x.style.display = "none";
                y.textContent = "Show More..";
            }
            }
        function change(myid) {
            var x = document.getElementById("like"+myid);
            var y = document.getElementById("likes"+myid);
            if(x.className==="bi bi-heart"){
                y.innerHTML = "<i class='bi bi-heart-fill' id='like"+myid+"'>1</i>";
                
            }else{
                y.innerHTML = "<i class='bi bi-heart' id='like"+myid+"'>0</i>";
                
            }

            };
        
        
    </script>
</body>
</html>
